@use "sass:color";

$fa-font-path: "../node_modules/@fortawesome/fontawesome-free/webfonts";

$family-sans-serif:
  BlinkMacSystemFont,
  -apple-system,
  "Segoe UI",
  "Roboto",
  "Oxygen",
  "Ubuntu",
  "Cantarell",
  "Fira Sans",
  "Droid Sans",
  "Helvetica Neue",
  "Helvetica",
  "Arial",
  sans-serif,
  "Font Awesome 6 Free Solid",
  "Font Awesome 6 Free Brands";

$box-radius: 4px;
$box-shadow: none;
$box-padding: 1.25rem 0;

$card-shadow: none;
$card-header-shadow: 0 0.05em 0.1em rgba(10, 10, 10, 0.1);

$switch-focus: none;

@import "@fortawesome/fontawesome-free/scss/fontawesome.scss";
@import "@fortawesome/fontawesome-free/scss/regular.scss";
@import "@fortawesome/fontawesome-free/scss/solid.scss";
@import "@fortawesome/fontawesome-free/scss/brands.scss";

@import "bulma/sass/utilities/_all.sass";

$grey-lightest: hsl(0, 0%, 93%);
$grey-darkest: hsl(0, 0%, 16%);
$menu-item-hover-background-color: $link-light;
$menu-item-active-color: $link-dark;
$menu-item-active-background-color: $link-light;

@font-face {
  font-family: "Font Awesome 6 Free Solid";
  font-style: normal;
  font-weight: 900;
  font-display: $fa-font-display;
  src:
    url("#{$fa-font-path}/fa-solid-900.woff2") format("woff2"),
    url("#{$fa-font-path}/fa-solid-900.ttf") format("truetype");
}

@font-face {
  font-family: "Font Awesome 6 Free Brands";
  font-style: normal;
  font-weight: 900;
  font-display: $fa-font-display;
  src:
    url("#{$fa-font-path}/fa-brands-400.woff2") format("woff2"),
    url("#{$fa-font-path}/fa-brands-400.ttf") format("truetype");
}

@import "bulma/bulma.sass";
@import "bulma-switch/src/sass/index.sass";
@import "@cityssm/bulma-sticky-table/sticky-table";

@import "bulma-prefers-dark/bulma-prefers-dark.sass";

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
  }

  .box {
    box-shadow: none;
  }

  .has-text-white {
    color: $black !important;
  }

  .has-text-black {
    color: $white !important;
  }

  .has-text-black-ter {
    color: $white-ter !important;
  }

  .has-background-white-bis {
    background-color: $black-bis !important;
  }

  .has-background-white {
    background-color: $black !important;
  }

  .tag:not(body).is-light {
    background-color: $black-ter;
    color: $white-bis;
  }

  .paisa {
    .navbar {
      background-color: $black-bis !important;
    }

    navbar.is-spaced .navbar-dropdown,
    .navbar-dropdown.is-boxed {
      box-shadow:
        0 8px 8px rgba(0, 0, 0, 1),
        0 0 0 1px rgba(0, 0, 0, 1);
    }

    .tippy-box[data-theme~="light"] {
      background-color: $black;
      box-shadow:
        0 8px 8px rgba(0, 0, 0, 1),
        0 0 0 1px rgba(0, 0, 0, 1);
    }

    .tippy-box[data-theme~="light"][data-placement^="top"] > .tippy-arrow:before {
      border-top-color: $black;
    }
    .tippy-box[data-theme~="light"][data-placement^="bottom"] > .tippy-arrow:before {
      border-bottom-color: $black;
    }
    .tippy-box[data-theme~="light"][data-placement^="left"] > .tippy-arrow:before {
      border-left-color: $black;
    }
    .tippy-box[data-theme~="light"][data-placement^="right"] > .tippy-arrow:before {
      border-right-color: $black;
    }
    .tippy-box[data-theme~="light"] > .tippy-backdrop {
      background-color: $black;
    }
    .tippy-box[data-theme~="light"] > .tippy-svg-arrow {
      fill: $black;
    }

    .tag:not(body).is-danger.is-light {
      background-color: $danger;
      color: $danger-light;
    }

    .tag:not(body).is-success.is-light {
      background-color: $success;
      color: $success-light;
    }

    .card {
      box-shadow:
        0 2px 3px rgba(0, 0, 0, 1),
        0 0 0 1px rgba(0, 0, 0, 1);
    }
  }

  .table td,
  .table th {
    border: 1px solid $grey-darker;
    border-width: 0 0 1px;
  }

  .content table td,
  .content table th {
    border: 1px solid $grey-darker;
    border-width: 0 0 1px;
  }
}

@tailwind components;
@tailwind utilities;

// daisy UI color override
.du-tabs {
  background-color: $grey-lightest !important;

  .du-tab {
    color: $grey-dark !important;

    &.du-tab-active {
      background-color: $white !important;
      color: $black-bis !important;
    }
  }
}

@media (prefers-color-scheme: dark) {
  .du-tabs {
    background-color: $grey-darkest !important;

    .du-tab {
      color: $grey-light !important;

      &.du-tab-active {
        background-color: $black !important;
        color: $white-bis !important;
      }
    }
  }
}

.du-menu {
  summary:after {
    color: $link;
  }

  a,
  summary {
    border-radius: $radius-small;
    color: $grey-dark;
  }

  a:hover,
  summary:hover {
    background-color: findLightColor($link) !important;
  }

  a.du-active {
    color: $link !important;
    background-color: findLightColor($link) !important;
    font-weight: bold;
  }
}

:focus {
  outline: 0;
}

body {
  font-size: 14px;
}

.secondary-link {
  color: $grey-dark;
  &:hover {
    color: $link;
    text-decoration: underline;
  }
}

@media (prefers-color-scheme: dark) {
  .secondary-link {
    color: $grey-light;
  }
}

.inline-text text {
  font-size: 12px;
  font-weight: bold;
}

.is-not-visible {
  visibility: hidden;
}

.is-bordered-bottom {
  border-bottom: 1px solid $grey-lighter;
}

.is-bordered-top {
  border-top: 1px solid $grey-lighter;
}

.is-bordered-right {
  border-right: 1px solid $grey-lighter;
}

.is-bordered-left {
  border-left: 1px solid $grey-lighter;
}

svg text {
  font-family: $family-sans-serif;
}

.svg-text-grey-lighter {
  fill: $grey-lighter;
}

.svg-text-grey-light {
  fill: $grey-light;
}

.svg-text-grey {
  fill: $grey;
}

.svg-text-grey-darker {
  fill: $grey-darker;
}

.svg-text-grey-dark {
  fill: $grey-dark;
}

.svg-grey-light {
  stroke: $grey-light;
}

.svg-grey-lighter {
  stroke: $grey-lighter;
}

.svg-grey-lightest {
  stroke: $grey-lightest;
}

.svg-grey {
  stroke: $grey;
}

.svg-grey-dark {
  stroke: $grey-dark;
}

.svg-grey-lighter {
  stroke: $grey-lighter;
}

.axis {
  font-family: $family-sans-serif;

  &.dark text {
    fill: $grey;
    font-size: 12px;
  }

  &.link text {
    fill: $link;
    font-size: 12px;
    cursor: pointer;
  }

  text {
    font-size: 10px;
    fill: $grey-light;
  }

  path.domain,
  line {
    fill: none;
    stroke: $grey-lighter;
    shape-rendering: crispEdges;
  }

  .tick line {
    stroke: $white-ter;
    shape-rendering: crispEdges;
  }

  &.y {
    line {
      stroke: $white-bis;
    }

    path.domain {
      display: none;
    }

    &.keep-domain path.domain {
      display: block;
    }
  }
}

@media (prefers-color-scheme: dark) {
  .axis {
    &.dark text {
      fill: $grey;
    }

    &.link text {
      fill: $link;
    }

    text {
      fill: $grey-dark;
    }

    path.domain,
    line {
      stroke: $grey-darker;
    }

    .tick line {
      stroke: $black-ter;
    }

    &.y {
      line {
        stroke: $black-bis;
      }
    }
  }
}

.g-arrow path {
  opacity: 0.5;
}

.legendOrdinal,
.legendLine {
  .label {
    display: block;
    font-size: 11px;
    text-transform: capitalize;
    font-weight: normal;
    color: $grey;
    fill: $grey;

    &.selected {
      fill: $grey-darker;
      font-weight: bold;
    }
  }
}

#d3-investment-timeline .legendOrdinal .label,
#d3-yearly-investment-timeline .legendOrdinal .label,
#d3-income-timeline .legendOrdinal .label,
#d3-repayment-timeline .legendOrdinal .label,
#d3-breakdown .legendOrdinal .label {
  font-size: 10px;
}

#d3-salary-timeline .x.axis > g.tick {
  display: none;
}

#d3-salary-timeline .x.axis > g.tick:nth-child(3n-1) {
  display: inline;
}

.node {
  box-sizing: border-box;
  position: absolute;
  overflow: hidden;
  display: flex;
  justify-content: center;
  flex-direction: column;
  flex-wrap: wrap;
}

#d3-allocation-category,
#d3-allocation-value {
  position: relative;
}

.popup-table td {
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.adjustable-input {
  border: none;
  border-bottom: 1px solid $grey-light;
  box-shadow: none;
  width: 80px;
  font-size: 1em !important;
  margin-left: 5px;
  padding-top: 0;
  padding-bottom: 0;
  padding-right: 0;
  padding-left: 5px;
  height: 1.3rem;
}

#d3-monthly-expense-timeline .cell,
#d3-yearly-expense-timeline .cell {
  cursor: pointer;
}

.zoomable {
  cursor: zoom-in;
}

.d3-calendar .days,
.d3-calendar .months,
.d3-calendar .weekdays {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: space-around;
  padding: 0;
  color: $grey-dark;
}

.d3-calendar .weekdays div {
  background: $white-ter;
  display: flex;
  justify-content: center;
  padding: 5px;
  flex: 14.28571%;
  margin: 0.1rem 0;
  align-items: center;
}

@media (prefers-color-scheme: dark) {
  .d3-calendar .weekdays div {
    background: $black-ter;
  }
}

.d3-calendar .days .date {
  display: flex;
  justify-content: center;
  flex: 14.28571%;
  margin: 0.1rem 0;
  align-items: center;
}

.d3-calendar .months .month {
  display: flex;
  justify-content: center;
  flex: 33.33%;
  margin: 0.1rem 0;
  align-items: center;
}

// BULMA overrides

.section {
  padding-right: 0;
  padding-left: 0;
  padding-top: 1.5rem;
  padding-bottom: 1.5rem;
}

.container.is-fluid {
  padding-left: 24px;
  padding-right: 24px;
}

.level-item p.title {
  padding: 5px;
  color: $white;
}

@media (prefers-color-scheme: dark) {
  .level-item p.title {
    padding: 5px;
    color: $black;
  }
}

.navbar-item,
.navbar-link {
  &.is-active {
    font-weight: 600;
  }
}

.navbar {
  background-color: $white-bis !important;
  color: rgba(0, 0, 0, 0.7);
}

.cm-editor {
  .cm-gutters {
    background-color: $white-ter;
    color: $grey-light;
    border: none;
  }

  .cm-activeLine,
  .cm-activeLineGutter {
    background-color: findLightColor($link) !important;
  }
}

.template-editor .cm-editor {
  height: 200px;
}

.editor .cm-editor {
  max-height: calc(100vh - 185px);
}
.cm-scroller {
  overflow: auto;
}

.cm-focused {
  outline: none !important;
}

.cm-tooltip-hover {
  font-family: monospace;
}

.svelte-select {
  .item.active span.name {
    font-weight: bold;
  }

  .selected-item {
    font-weight: bold;
    .tag {
      font-weight: normal !important;
    }
  }

  border: 1px solid $grey-lighter !important;

  &.focused,
  &:hover {
    border: 1px solid $grey-light !important;
  }

  .svelte-select-list {
    box-shadow:
      0 8px 8px rgba(10, 10, 10, 0.1),
      0 0 0 1px rgba(10, 10, 10, 0.1) !important;
  }
}

.sc-carousel-dots__dot-container {
  margin-top: 10px;
}

.sc-carousel-button.sc-carousel-dot__dot {
  color: $grey-lighter;

  button {
    color: $grey-lighter;
    &.sc-carousel-dot__dot_active {
      color: $grey-light;

      &:focus {
        outline: none;
      }
    }
  }
}
