<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>₹ Paisa</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="tutorial.html"><strong aria-hidden="true">2.</strong> Tutorial</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="accounts.html"><strong aria-hidden="true">3.</strong> Accounts</a></li><li class="chapter-item expanded "><a href="commodities.html"><strong aria-hidden="true">4.</strong> Commodities</a></li><li class="chapter-item expanded "><a href="allocation-targets.html"><strong aria-hidden="true">5.</strong> Allocation Targets</a></li><li class="chapter-item expanded "><a href="tax.html"><strong aria-hidden="true">6.</strong> Tax</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tax-harvesting.html"><strong aria-hidden="true">6.1.</strong> Tax Harvesting</a></li><li class="chapter-item expanded "><a href="capital-gains.html"><strong aria-hidden="true">6.2.</strong> Capital Gains</a></li><li class="chapter-item expanded "><a href="schedule-al.html"><strong aria-hidden="true">6.3.</strong> Schedule AL</a></li></ol></li><li class="chapter-item expanded "><a href="retirement.html"><strong aria-hidden="true">7.</strong> Retirement</a></li><li class="chapter-item expanded "><a href="analysis.html"><strong aria-hidden="true">8.</strong> Analysis</a></li><li class="chapter-item expanded "><a href="import.html"><strong aria-hidden="true">9.</strong> Import</a></li><li class="chapter-item expanded "><a href="bulk-edit.html"><strong aria-hidden="true">10.</strong> Bulk Edit</a></li><li class="chapter-item expanded "><a href="recurring.html"><strong aria-hidden="true">11.</strong> Recurring</a></li><li class="chapter-item expanded "><a href="budget.html"><strong aria-hidden="true">12.</strong> Budget</a></li><li class="chapter-item expanded "><a href="ledger-cli.html"><strong aria-hidden="true">13.</strong> Ledger CLI</a></li><li class="chapter-item expanded "><a href="config.html"><strong aria-hidden="true">14.</strong> Config</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">₹ Paisa</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><strong>Paisa</strong> is a command line tool and Web UI to manage personal
finance. It builds on top of the <a href="https://www.ledger-cli.org/">ledger</a> double entry accounting
tool.</p>
<ul>
<li>Your financial data never leaves your system.</li>
<li>The journal and config information are stored in plain text files
that can be easily version controlled. You can collaborate with
others by giving access to the files.</li>
<li>Can track the latest market price of your Mutual Fund, NPS Fund
and Stock holdings.</li>
<li>Can show the Mutual Fund and Stock holdings eligible for LTCG and
help you plan Tax Harvesting.</li>
<li>Can convert CSV or Excel sheets to Ledger journal.</li>
<li>Can help with retirement planning.</li>
<li>And many more visualizations to help you make any financial
decisions.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<ul>
<li>Follow the installation instruction on <a href="https://www.ledger-cli.org/download.html">ledger</a> site and install
<strong>ledger</strong>. Windows users can install ledger via
<a href="https://community.chocolatey.org/packages/ledger">chocolatey</a>. Paisa is also compatible with <a href="https://hledger.org/install.html">hledger</a>. Refer
<a href="ledger-cli.html">ledger cli</a> page for more information.</li>
<li>Download the latest prebuilt <a href="https://github.com/ananthakumaran/paisa/releases/latest">binary</a></li>
<li>Once downloaded, you can perform the following steps to install
it.</li>
</ul>
<pre><code class="language-shell">❯ mv paisa-* paisa
❯ chmod u+x paisa
❯ xattr -dr com.apple.quarantine paisa # applicable only on Mac
❯ mv paisa /usr/local/bin
</code></pre>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<p>Run the following commands to checkout <strong>paisa</strong> features. Read the
<a href="./tutorial.html">tutorial</a> to understand the details.</p>
<pre><code class="language-shell">❯ mkdir finance
❯ cd finance
❯ paisa init
INFO Generating config file: /home/john/finance/paisa.yaml
INFO Generating journal file: /home/john/finance/personal.ledger
❯ paisa update
INFO Using config file: /home/john/finance/paisa.yaml
INFO Syncing transactions from journal
INFO Fetching commodities price history
INFO Fetching commodity NIFTY
INFO Fetching commodity NIFTY_JR
❯ paisa serve
INFO Using config file: /home/john/finance/paisa.yaml
INFO Listening on 7500
</code></pre>
<p>Go to <a href="http://localhost:7500">http://localhost:7500</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tutorial"><a class="header" href="#tutorial">Tutorial</a></h1>
<p>This tutorial will introduce all the concepts necessary to get
started. <strong>Paisa</strong> builds on top of <strong>ledger</strong>, so we will first spend
some time to familiarize the <a href="https://github.com/ledger/ledger/blob/master/doc/GLOSSARY.md">terms and concepts</a> used by <strong>ledger</strong></p>
<h2 id="journal"><a class="header" href="#journal">Journal</a></h2>
<p>A journal file captures all your financial transactions. A transaction
may represent a mutual fund purchase, EPF contribution and so
on. Let's create a file named <code>personal.ledger</code> with the following
content</p>
<pre><code class="language-go">2022/01/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR
</code></pre>
<p><strong>ledger</strong> follows the double-entry accounting system. In simple terms, it
tracks the movement of money from debit account to credit
account. Here <code>Income:Salary:Acme</code> is the debit account and
<code>Assets:Checking</code> is the credit account. The date at which the
transaction took place and a description of the transaction is written
in the first line followed by the list of credit or debit
entry. Account <a href="./accounts.html">naming conventions</a> are explained later. The <code>:</code> in the account name
represents hierarchy. Its use will become more clear when we look at
the reports generated by ledger. The sum of the balance of all the
accounts must be zero.</p>
<pre><code class="language-go">2022/01/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR

2022/02/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR

2022/03/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                             100,000 INR
</code></pre>
<p>let's add few more entries. The total balance in your savings account
could be found by</p>
<pre><code class="language-go">❯ ledger -f personal.ledger balance Assets:Checking
300,000 INR  Assets:Checking
</code></pre>
<p>Let's say your company deducts 12,000 INR and contributes it to EPF,
we could represent it as follows</p>
<pre><code class="language-go">2022/01/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                              88,000 INR
    Assets:Debt:EPF                              12,000 INR

2022/02/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                              88,000 INR
    Assets:Debt:EPF                              12,000 INR

2022/03/01 Salary
    Income:Salary:Acme                         -100,000 INR
    Assets:Checking                              88,000 INR
    Assets:Debt:EPF                              12,000 INR
</code></pre>
<pre><code class="language-shell">❯ ledger -f personal.ledger balance Assets
          36,000 INR  Assets:Debt:EPF
         264,000 INR  Assets:Checking
--------------------
         300,000 INR
</code></pre>
<h2 id="commodity"><a class="header" href="#commodity">Commodity</a></h2>
<p>So far we have only dealt with INR. <strong>ledger</strong> can handle commodity as
well. Let's say you are also investing 10,000 INR in UTI Nifty Index
Fund and 10,000 INR in ICICI Nifty Next 50 Index Fund every
month.</p>
<pre><code class="language-go">2018/01/01 Investment
    Assets:Checking                              -20,000 INR
    Assets:Equity:NIFTY         148.0865 NIFTY @ 67.5281 INR
    Assets:Equity:NIFTY_JR   358.6659 NIFTY_JR @ 27.8811 INR

2018/02/01 Investment
    Assets:Checking                              -20,000 INR
    Assets:Equity:NIFTY         140.2870 NIFTY @ 71.2824 INR
    Assets:Equity:NIFTY_JR   363.2242 NIFTY_JR @ 27.5312 INR

2018/03/01 Investment
    Assets:Checking                              -20,000 INR
    Assets:Equity:NIFTY         147.5908 NIFTY @ 67.7549 INR
    Assets:Equity:NIFTY_JR   378.4323 NIFTY_JR @ 26.4248 INR
</code></pre>
<p>Let's consider <code>148.0865 NIFTY @ 67.5281 INR</code>. Here NIFTY is the name
of the commodity and we have bought 148.0865 units at 67.5281 INR per
unit.</p>
<pre><code>❯ ledger -f personal.ledger balance Assets --market
          94,615 INR  Assets
          36,000 INR    Debt:EPF
          58,615 INR    Equity
          29,539 INR      NIFTY
          29,076 INR      NIFTY_JR
--------------------
          94,615 INR
</code></pre>
<h2 id="interest"><a class="header" href="#interest">Interest</a></h2>
<p>There are many instruments like EPF, FD, etc that pay interest at
regular intervals. We can treat it as just another transaction.</p>
<pre><code class="language-go">2022/03/31 EPF Interest
    Income:Interest:EPF                         -15,000 INR
    Assets:Debt:EPF                              15,000 INR
</code></pre>
<h2 id="config"><a class="header" href="#config">Config</a></h2>
<p>So far we have been mostly talking about <strong>ledger</strong>. We need to know
the basics of <strong>ledger</strong> because <strong>paisa</strong> builds on top of
<strong>ledger</strong>.</p>
<p><strong>paisa</strong> checks for a config file named <code>paisa.yaml</code> in the current
directory. It can also be set via flag <code>--config</code> or env variable
<code>PAISA_CONFIG</code>. The default config is tuned for Indians, users from
other countries would have to change the <code>default_currency</code> and
<code>locale</code>. Check the <a href="./config.html">config</a> section for details.</p>
<pre><code class="language-yaml"># absolute path of journal file
journal_path: /home/john/finance/personal.ledger
# absolute path of sql database
db_path: /home/john/finance/paisa.db
# commodities list
commodities:
  - name: NIFTY
    type: mutualfund
    code: 120716
  - name: NIFTY_JR
    type: mutualfund
    code: 120684
</code></pre>
<p><strong>paisa</strong> can fetch the latest price of mutual funds, nps funds and
stocks as of today. For other types of commodities, the purchase/sell
price of the last transaction would be considered the latest
price. The code is the scheme code of the fund. The <em>search</em> command
can be used to find scheme code</p>
<pre><code class="language-shell">❯ paisa search mutualfund
INFO Using config file: /home/john/finance/paisa.yaml
INFO Using cached results; pass '-u' to update the cache
✔ ICICI Prudential Asset Management Company Limited
✔ ICICI Prudential Nifty Next 50 Index Fund - Direct Plan -  Growth
INFO Mutual Fund Scheme Code: 120684
</code></pre>
<p>You might see a lot of funds with similar names. The search command
supports crude fuzzy search. For example, <code>nifty next grow direct</code> would match the above fund.</p>
<h2 id="update"><a class="header" href="#update">Update</a></h2>
<p>Once the config file is created, run the update command, followed by
the serve command.</p>
<pre><code class="language-shell">❯ paisa update
INFO Using config file: /home/john/finance/paisa.yaml
INFO Syncing transactions from journal
INFO Fetching commodities price history
INFO Fetching commodity NIFTY
INFO Fetching commodity NIFTY_JR
❯ paisa serve
INFO Using config file: /home/john/finance/paisa.yaml
INFO Listening on 7500
</code></pre>
<p>You can then go to <a href="http://localhost:7500">http://localhost:7500</a> to view more
details. The update command loads all the transactions from journal
file and fetch the latest price of all the commodities. Whenever you
make any changes to the journal file, you need to run the update
command. The serve command starts a local server and provides the
Web UI.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="accounts"><a class="header" href="#accounts">Accounts</a></h1>
<p>If you take a typical transaction, money moves between two parties. In
ledger, you call them <strong>Account</strong>. At least two accounts are involved
in any transaction. Accounts are also hierarchical. This helps with
the organization. For example you can treat EPF and PPF as two
accounts namely <code>Assets:Debt:EPF</code> and <code>Assets:Debt:PPF</code>. The
hierarchy helps you ask questions like what is the balance of
<code>Assets:Debt</code>, which will include both EPF and PPF</p>
<p>Even though <strong>ledger</strong> doesn't have any strict Account naming
convention, <strong>paisa</strong> expects you to follow the standard naming
convention.</p>
<p>There are four types of account namely</p>
<ol>
<li>Assets</li>
<li>Liabilities</li>
<li>Income</li>
<li>Expenses</li>
</ol>
<p><img src="images/flow.png" alt="Flow" /></p>
<p>All the accounts you create should be under one of these
accounts. This naming convention is a necessity, because without
which, it's not possible to tell whether you are spending money or
investing money. A transaction from Assets account to Expenses account
implies that you are spending money.</p>
<p>Money typically flows from Income to Assets, from Assets to either
Expenses, Liabilities or other Assets, from Liabilities to Expenses.</p>
<p>As a general principle, try not to create too many accounts at second
level. The UI works best when you create less than or equal to 12
second level account under each type. For example, you can have 12
accounts under <code>Expenses</code>. But if you want more, try to add them under
3 level, example <code>Expenses:Food:Subway</code>.</p>
<h3 id="assets"><a class="header" href="#assets">Assets</a></h3>
<p>All your assets should go under <code>Assets:</code>. The level of granularity is
up to you. The recommended convention is to use
<code>Assets:{instrument_type}:{instrument_name}</code>. The instrument type may
be <code>Cash</code>, <code>Equity</code>, <code>Debt</code>, etc. The instrument name may be the name of
the fund, stock, etc</p>
<h3 id="checking"><a class="header" href="#checking">Checking</a></h3>
<p><code>Assets:Checking</code> is a special account where you keep your money for
daily use. This will be included in your net worth, but will not be
treated as an investment. So gain page for example, will exclude this
account and won't show the returns.</p>
<h3 id="income"><a class="header" href="#income">Income</a></h3>
<p>All your income should come from <code>Income:</code>. The typical way is to
treat each employer as a separate account.</p>
<ul>
<li><code>Income:Salary:{company}</code> - salary debit account</li>
</ul>
<h3 id="interest-1"><a class="header" href="#interest-1">Interest</a></h3>
<p><code>Income:Interest</code> is a special type of account from the perspective of
returns calculation. Let's assume you have bought APPLE stock. You
might be buying them at regular intervals. To calculate your returns,
we can compute the difference between purchase price and current
price.</p>
<p>Now in case of FD, you will get your interest credited to your
account. The returns is the difference between the amount you
deposited and the final balance. It's essential we need to know which
transactions are deposits and which are interest credits.</p>
<p>Any money that comes from the sub account of <code>Income:Interest</code> will be
treated as interest. This convention allows paisa to calculate the
returns of any debt instrument without explicitly specifying anything
else.</p>
<ul>
<li><code>Income:Interest:{name}</code> - interest debit account</li>
</ul>
<h3 id="tax"><a class="header" href="#tax">Tax</a></h3>
<p>Income tax paid to government should be credited to <code>Expenses:Tax</code>
account. This is used to calculate your Net Income and your Savings
Rate.</p>
<h3 id="expenses"><a class="header" href="#expenses">Expenses</a></h3>
<p>All your expenses should go to <code>Expenses:{category}</code> accounts. You can
also have more than 2 levels as well. The expense page will roll it up
to 2 level wherever necessary.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="commodities"><a class="header" href="#commodities">Commodities</a></h1>
<p>There are no restrictions on the type of <strong>commodities</strong> that can be
used in <strong>paisa</strong>. Anything like gold, mutual fund, NPS, etc can be
tracked as a commodity. Few example transactions can be found below.</p>
<pre><code class="language-go">2019/02/18 NPS
    Assets:Equity:NPS:SBI:E           15.9378 NPS_SBI_E @ 23.5289 INR
;// account name                      units   commodity   purchase price
;//                                           name        per unit
    Assets:Checking

2019/02/21 NPS
    Assets:Equity:NPS:SBI:E           1557.2175 NPS_SBI_E @ 23.8406 INR
    Assets:Checking

2020/06/25 Gold
    Assets:Gold                       40 GOLD @ 4650 INR
    Assets:Checking
</code></pre>
<p><strong>paisa</strong> comes with inbuilt support for fetching the latest price of
some commodities like mutual fund and NPS. For others, it will try to
use the latest purchase price specified in the journal. For example,
when you enter the second NPS transaction on <code>2019/02/21</code>, the
valuation of your existing holdings will be adjusted based on the new
purchase price.</p>
<h2 id="mutual-fund"><a class="header" href="#mutual-fund">Mutual Fund</a></h2>
<p>To automatically track the latest value of your mutual funds holdings,
you need to link the commodity and the fund scheme code.</p>
<pre><code class="language-yaml">commodities:
  - name: NIFTY      # commodity name
    type: mutualfund # type
    code: 120716     # mutual fund scheme code
  - name: NIFTY_JR
    type: mutualfund
    code: 120684
</code></pre>
<p>The example config above links two commodities with their respective
mutual fund scheme code. The scheme code can be found using the
<em>search</em> command.</p>
<pre><code class="language-shell">❯ paisa search mutualfund
INFO Using config file: /home/john/finance/paisa.yaml
INFO Using cached results; pass '-u' to update the cache
✔ ICICI Prudential Asset Management Company Limited
✔ ICICI Prudential Nifty Next 50 Index Fund - Direct Plan -  Growth
INFO Mutual Fund Scheme Code: 120684
</code></pre>
<h2 id="nps"><a class="header" href="#nps">NPS</a></h2>
<p>To automatically track the latest value of your nps funds holdings,
you need to link the commodity and the fund scheme code.</p>
<pre><code class="language-yaml">commodities:
  - name: NPS_HDFC_E      # commodity name
    type: nps             # type
    code: SM008002        # nps fund scheme code
</code></pre>
<p>The example config above links NPS fund commodity with their
respective NPS fund scheme code. The scheme code can be found using
the <em>search</em> command.</p>
<pre><code>❯ paisa search nps
INFO Using config file: /home/john/finance/paisa.yaml
INFO Using cached results; pass '-u' to update the cache
✔ HDFC Pension Management Company Limited
✔ HDFC PENSION MANAGEMENT COMPANY LIMITED SCHEME C - TIER I
INFO NPS Fund Scheme Code: SM008002
</code></pre>
<h2 id="stock"><a class="header" href="#stock">Stock</a></h2>
<p>To automatically track the latest value of your stock holdings,
you need to link the commodity and the stock ticker name.</p>
<pre><code class="language-yaml">commodities:
  - name: APPLE           # commodity name
    type: stock           # type
    code: AAPL            # stock ticker code
</code></pre>
<p>Stock prices are fetched from yahoo finance website. The ticker code
should match the code used in yahoo.</p>
<h2 id="realestate"><a class="header" href="#realestate">RealEstate</a></h2>
<p>Some commodities like real estate are bought once and the price
changes over time. Ledger allows you to set the price as on date.</p>
<pre><code class="language-go">2014/01/01 Home purchase
    Assets:House                                1 APT @ 4000000 INR
    Liabilities:Homeloan

P 2016/01/01 00:00:00 APT 5000000 INR
P 2018/01/01 00:00:00 APT 6500000 INR
P 2020/01/01 00:00:00 APT 6700000 INR
P 2021/01/01 00:00:00 APT 6300000 INR
P 2022/01/01 00:00:00 APT 8000000 INR
</code></pre>
<h2 id="currencies"><a class="header" href="#currencies">Currencies</a></h2>
<p>If you need to deal with multiple currencies, just treat them as you
would treat any commodity. Since paisa is a reporting tool, it will
always try to convert other currencies to the
<a href="./config.html">default_currency</a>. As long as the exchange rate from a currency to
default_currency is available, paisa would work without issue</p>
<pre><code class="language-go">P 2023/05/01 00:00:00 USD 81.75 INR

2023/05/01 Freelance Income
    ;; conversion rate will be picked up from the price directive above
    Income:Freelance                            -100 USD
    Assets:Checking

2023/06/01 Freelance Income
    ;; conversion rate is specified inline
    Income:Freelance                            -200 USD @ 82.75 INR
    Assets:Checking

2023/07/01 Netflix
    ;; if not available for a date, will use previous known conversion rate (82.75)
    Expenses:Entertainment                        10 USD
    Assets:Checking
</code></pre>
<h2 id="updates"><a class="header" href="#updates">Updates</a></h2>
<p><strong>paisa</strong> fetches the latest price of the commodities only when
<em>update</em> command is used. Make sure to run <code>paisa update</code> command
after you make any changes to your journal file or you want to fetch
the latest value of the commodities. The update can be performed from
the UI as well via the dropdown in the top right corner.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="allocation-targets"><a class="header" href="#allocation-targets">Allocation Targets</a></h1>
<p>Paisa allows you to set a allocation target for a group of
accounts. The allocation page shows how far your current allocation is
from the allocation target. For example, to keep a 40:60 split between
debt and equity, add the following configuration to the <code>paisa.yaml</code>
file. The account name can have <code>*</code> which matches any characters</p>
<pre><code class="language-yaml">allocation_targets:
  - name: Debt
    target: 40
    accounts:
      - Assets:Debt:*
  - name: Equity
    target: 60
    accounts:
      - Assets:Equity:*
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tax-1"><a class="header" href="#tax-1">Tax</a></h1>
<p>Paisa provides few features to help with tax filing and tax
optimization.</p>
<h2 id="disclaimer"><a class="header" href="#disclaimer">Disclaimer</a></h2>
<p>The author of this tool is not an accountant, the calculations are
made based on their interpretation of rules and regulation. This tool
is distributed free hoping it would be useful. The users are advised
to consult a tax accountant before making any decision based on the
information provided here. Check the <a href="https://github.com/ananthakumaran/paisa/blob/master/COPYING">LICENSE</a> of paisa for more
details.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tax-harvesting"><a class="header" href="#tax-harvesting">Tax Harvesting</a></h1>
<p>Gains from asset types like Mutual Fund, Stock are subject to capital
gains tax. The taxation rate itself differs based on how long you hold
your investment, whether it's debt or equity, whether you have more
than 1 Lakh gains in a year etc. To further complicate things, there
might be exit load applicable.</p>
<p>Paisa takes a generic approach and let the user configure when a
commodity is safe to harvest. There are two fields related to tax
harvesting.</p>
<ol>
<li>
<p>harvest - specifies the number of days after which the commodity is
eligible for tax harvesting. This should be set based on fund exit
load, fund category etc</p>
</li>
<li>
<p>tax_category - This defines how the taxes are calculated as the
government usually tweaks the tax code regularly with various rules
like grandfathering, cost inflation index adjustment, etc.</p>
<ol>
<li>
<p><code>equity65</code> - This is for 65% or more investment in Indian
equity.</p>
</li>
<li>
<p><code>equity35</code> - This if for 35% or more investment in India equity
but less than 65%</p>
</li>
<li>
<p><code>debt</code> - This is for debt funds.</p>
</li>
<li>
<p><code>unlisted_equity</code> - This is for unlisted foreign on Indian equity.</p>
</li>
</ol>
</li>
</ol>
<pre><code class="language-yaml">commodities:
  - name: NIFTY
    type: mutualfund
    code: 120716
    harvest: 365
    tax_category: equity65
  - name: ABSTF
    type: mutualfund
    code: 119533
    harvest: 1095
    tax_category: debt
</code></pre>
<p>The tax harvest page will show the list of accounts eligible for
harvesting.</p>
<h2 id="multiple-folios"><a class="header" href="#multiple-folios">Multiple Folios</a></h2>
<p>Paisa uses FIFO method within an Account. If you have multiple folios,
this might result in incorrect values. The issue can be solved by
using a different Account for each folio.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="capital-gains"><a class="header" href="#capital-gains">Capital Gains</a></h1>
<p>Mutual Funds are considered as capital asset and capital gains tax
will be charged on any gains. Capital Gains page shows the financial
year wise capital gains tax based on the withdrawal transaction. The
sum total, account wise breakdown, and per buy/sell match information
are available.</p>
<p>Only commodities with <code>tax_category</code> are considered. Please check <a href="tax-harvesting.html">Tax
Harvesting</a> page for configuration details.</p>
<h3 id="gain"><a class="header" href="#gain">Gain</a></h3>
<p>The difference between the purchase and sell price.</p>
<h3 id="taxable-gain"><a class="header" href="#taxable-gain">Taxable Gain</a></h3>
<p>The gain after applying Indexation or Grandfathering provision.</p>
<p>Based on the duration between the purchase and sell date, an asset
might be classified as Short Term or Long Term.</p>
<h3 id="short-term-tax"><a class="header" href="#short-term-tax">Short Term Tax</a></h3>
<p>This would be a percentage of the Taxable Gain. The percentage varies
based on the asset class.</p>
<h3 id="long-term-tax"><a class="header" href="#long-term-tax">Long Term Tax</a></h3>
<p>This would be a percentage of the Taxable Gain. The percentage varies
based on the asset class.</p>
<h3 id="taxable-at-slab-rate"><a class="header" href="#taxable-at-slab-rate">Taxable at Slab Rate</a></h3>
<p>There are cases where the gain would be added to taxable income and
charged <strong>Slab</strong> rate. Since the tax rate would depend on the person,
the whole taxable amount is shown instead of the tax. You can multiply
this with your slab rate to get the tax amount.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="schedule-al"><a class="header" href="#schedule-al">Schedule AL</a></h1>
<p>As per the Indian Income tax law, citizens are obligated to report
their entire Assets and Liabilities if the total income exceeds ₹50
lakh. Paisa helps with the computation of the amount.</p>
<div class="table-wrapper"><table><thead><tr><th>code</th><th>Section</th><th>Details</th></tr></thead><tbody>
<tr><td>immovable</td><td>A (1)</td><td>Immovable Assets</td></tr>
<tr><td>metal</td><td>B (1) (i)</td><td>Jewellery, bullion etc.</td></tr>
<tr><td>art</td><td>B (1) (ii)</td><td>Archaeological collections, drawings, painting, sculpture or any work of art</td></tr>
<tr><td>vehicle</td><td>B (1) (iii)</td><td>Vehicles, yachts, boats and aircrafts</td></tr>
<tr><td>bank</td><td>B (1) (iv) (a)</td><td>Financial assets: Bank (including all deposits)</td></tr>
<tr><td>share</td><td>B (1) (iv) (b)</td><td>Financial assets: Shares and securities</td></tr>
<tr><td>insurance</td><td>B (1) (iv) (c)</td><td>Financial assets: Insurance policies</td></tr>
<tr><td>loan</td><td>B (1) (iv) (d)</td><td>Financial assets: Loans and advances given</td></tr>
<tr><td>cash</td><td>B (1) (iv) (e)</td><td>Financial assets: Cash in hand</td></tr>
<tr><td>liability</td><td>C (1)</td><td>Liabilities</td></tr>
</tbody></table>
</div>
<p>All you need to do is to specify the accounts that belong to each
section. Paisa will compute the total as on the last day of the
previous financial year.</p>
<pre><code class="language-yaml">schedule_al:
    - code: bank
      accounts:
          - Assets:Checking
    - code: share
      accounts:
          - Assets:Equity:*
          - Assets:Debt:*

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="retirement"><a class="header" href="#retirement">Retirement</a></h1>
<p>Paisa will help you plan your retirement and track your progress. The
first part is figuring out what should be your retirement corpus. This
will be your target. Instead of specifying the amount explicitly, you
can specify your expected yearly expenses and the safe withdrawal
rate.</p>
<pre><code class="language-yaml">retirement:
    swr: 3.3
    yearly_expenses: 1100000
</code></pre>
<p>If you use paisa to track expenses, instead of specifying the
<code>yearly_expenses</code>, you can specify the list of accounts. Paisa will
take the average of the last 3 year expenses</p>
<pre><code class="language-yaml">retirement:
  swr: 2
  expenses:
    - Expenses:Entertainment
    - Expenses:Gift
    - Expenses:Insurance
    - Expenses:Misc
    - Expenses:Shopping
    - Expenses:Utilities
</code></pre>
<p>Now that the target is specified, you need to specify the list of
accounts where you keep your retirement savings.</p>
<pre><code class="language-yaml">retirement:
  swr: 2
  expenses:
    - Expenses:Entertainment
    - Expenses:Gift
    - Expenses:Insurance
    - Expenses:Misc
    - Expenses:Shopping
    - Expenses:Utilities
  savings:
    - Assets:Equity:*
    - Assets:Debt:*
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="analysis"><a class="header" href="#analysis">Analysis</a></h1>
<p>Ledger represents everything except currency as commodities. A
commodity could represent physical object like Gold or certificates
like Stock, Bond etc. Some commodities like Mutual Fund is a container
for Securities. When you own a mutual fund unit, you indirectly own
these securities.</p>
<p>The Analysis page unwraps the container and shows you what securities
you own along with their amount and percentage. It also categorizes
the securities by their industry and rating.</p>
<blockquote>
<p>The data that powers this page comes from various sources and might
not be 100% accurate. Before you make any decision based on this
information, double check via different source.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="import"><a class="header" href="#import">Import</a></h1>
<p>Paisa provides ability to convert <strong>CSV</strong>, <strong>TXT</strong>, <strong>XLS</strong>, <strong>XLSX</strong>
or <strong>PDF</strong> files to Ledger file format. The import page is made of
three components.</p>
<ol>
<li>
<p>File Preview - You can drag and drop files here to preview the
contents.</p>
</li>
<li>
<p>Ledger Preview - This is where the converted ledger file will be
shown.</p>
</li>
<li>
<p>Template Editor - This is where you can edit the template.</p>
</li>
</ol>
<p>Each row in the CSV file is converted to a transaction in the
ledger. This conversion is controlled by the template.</p>
<pre><code class="language-handlebars">{{#if (and (isDate ROW.A &quot;DD/MM/YYYY&quot;) (isBlank ROW.G))}}
 {{date ROW.A &quot;DD/MM/YYYY&quot;}} {{ROW.C}}
    {{predictAccount prefix=&quot;Expenses&quot;}}		{{ROW.F}} INR
    Assets:Checking
{{/if}}
</code></pre>
<p>Let's break this down. The first line is a conditional statement. It
checks if the row has a date in the first column. You can refer any
column using their alphabets. The second line constructs the
transaction header. The third line constructs the first posting. The
fourth line constructs the second posting.</p>
<p>Effectively a single row in the CSV file is converted to a single
transaction like this.</p>
<pre><code>2023/03/28 AMAZON HTTP://WWW.AM IN
    Expenses:Shopping		249.00 INR
    Assets:Checking
</code></pre>
<p>The template is written in <a href="https://handlebarsjs.com/">Handlebars</a>. Paisa provides a few
helper functions to make it easier to write the template.</p>
<h4 id="template-management"><a class="header" href="#template-management">Template Management</a></h4>
<p>Paisa ships with a few builtin templates. You can also create your
own. To create a new template, edit the template and click on the
<code>Save As</code> button.</p>
<blockquote>
<p>The import system is designed to be extensible. If you are unable to
create a template suitable for your CSV file, please open an issue
with a sample CSV file.</p>
</blockquote>
<h4 id="template-data"><a class="header" href="#template-data">Template Data</a></h4>
<ol>
<li><strong>ROW</strong> - This is the current row being processed. You can refer to
any column using their alphabets. For example, <code>ROW.A</code> refers to
the first column, <code>ROW.B</code> refers to the second column and so
on. The current row index is available as <code>ROW.index</code>.</li>
</ol>
<details>
  <summary>Example</summary>
<pre><code class="language-json">{
  &quot;A&quot;: &quot;28/03/2023&quot;,
  &quot;B&quot;: &quot;7357680821&quot;,
  &quot;C&quot;: &quot;AMAZON HTTP://WWW.AM IN&quot;,
  &quot;D&quot;: &quot;12&quot;,
  &quot;E&quot;: &quot;0&quot;,
  &quot;F&quot;: &quot;249.00&quot;,
  &quot;G&quot;: &quot;&quot;,
  &quot;index&quot;: 6
}
</code></pre>
</details>
<ol start="2">
<li><strong>SHEET</strong> - This is the entire sheet. It is an array of rows. You
can refer a specific cell using the following syntax <code>SHEET.5.A</code>.</li>
</ol>
<details>
  <summary>Example</summary>
<pre><code class="language-json">[
    {
        &quot;A&quot;: &quot;Accountno:&quot;,
        &quot;B&quot;: &quot;49493xxx003030&quot;,
        &quot;index&quot;: 0
    },
    {
        &quot;A&quot;: &quot;Customer Name:&quot;,
        &quot;B&quot;: &quot;MR John Doe&quot;,
        &quot;index&quot;: 1
    },
    {
        &quot;A&quot;: &quot;Address:&quot;,
        &quot;B&quot;: &quot;1234, ABC Street, XYZ City, 123456&quot;,
        &quot;index&quot;: 2
    },
    {
        &quot;A&quot;: &quot;Transaction Details:&quot;,
        &quot;index&quot;: 3
    },
    {
        &quot;A&quot;: &quot;Date&quot;,
        &quot;B&quot;: &quot;Sr.No.&quot;,
        &quot;C&quot;: &quot;Transaction Details&quot;,
        &quot;D&quot;: &quot;Reward Point Header&quot;,
        &quot;E&quot;: &quot;Intl.Amount&quot;,
        &quot;F&quot;: &quot;Amount(in Rs)&quot;,
        &quot;G&quot;: &quot;BillingAmountSign&quot;,
        &quot;index&quot;: 4
    },
    {
        &quot;A&quot;: &quot;49493xxx003030&quot;,
        &quot;index&quot;: 5
    },
    {
        &quot;A&quot;: &quot;28/03/2023&quot;,
        &quot;B&quot;: &quot;7357680821&quot;,
        &quot;C&quot;: &quot;AMAZON HTTP://WWW.AM IN&quot;,
        &quot;D&quot;: &quot;12&quot;,
        &quot;E&quot;: &quot;0&quot;,
        &quot;F&quot;: &quot;249.00&quot;,
        &quot;G&quot;: &quot;&quot;,
        &quot;index&quot;: 6
    },
    {
        &quot;A&quot;: &quot;28/03/2023&quot;,
        &quot;B&quot;: &quot;7357821997&quot;,
        &quot;C&quot;: &quot;AMAZON HTTP://WWW.AM IN&quot;,
        &quot;D&quot;: &quot;28&quot;,
        &quot;E&quot;: &quot;0&quot;,
        &quot;F&quot;: &quot;575.00&quot;,
        &quot;G&quot;: &quot;&quot;,
        &quot;index&quot;: 7
    }
]
</code></pre>
</details>
<h4 id="template-helpers"><a class="header" href="#template-helpers">Template Helpers</a></h4>
<ol>
<li>
<p><code>eq(a: any, b: any): boolean</code> - Checks if the two values are
equal.</p>
</li>
<li>
<p><code>not(value: any): boolean</code> - Negates the given value.</p>
</li>
<li>
<p><code>and(...args: any[]): boolean</code> - Returns true if all the
arguments are true.</p>
</li>
<li>
<p><code>or(...args: any[]): boolean</code> - Returns true if any of the
arguments are true.</p>
</li>
<li>
<p><code>isDate(str: string, format: string): boolean</code> - Checks if the
given string is a valid date in the given format. Refer <a href="https://day.js.org/docs/en/parse/string-format#list-of-all-available-parsing-tokens">Day.js</a>
for the full list of supported formats.</p>
</li>
<li>
<p><code>predictAccount(...corpus: string[], {prefix?: string}): string</code> -
Predicts the account name based on your existing ledger file. The
corpus provided will be matched with the existing transaction
description and amount.</p>
<p>If <code>corpus</code> is not provided, the entire <code>ROW</code> will be used</p>
<p>The <code>prefix</code> is optional and will be used to filter out matching
accounts. If no match is found, <code>Unknown</code> will be returned.</p>
</li>
</ol>
<pre><code class="language-handlebars">{{predictAccount prefix=&quot;Income&quot;}}
{{predictAccount ROW.C ROW.F prefix=&quot;Income&quot;}}
</code></pre>
<blockquote>
<p>NOTE: prediction will only work if you have similar transactions in
ledger file. It usually means, first time you have to manually fix
the Unknown account and then subsequent imports will work</p>
</blockquote>
<ol start="7">
<li>
<p><code>isBlank(str: string): boolean</code> - Checks if the given string is
blank.</p>
</li>
<li>
<p><code>date(str: string, format: string): string</code> - Parses the given
string as a date in the given format and returns the date in the
format <code>YYYY/MM/DD</code>. Refer <a href="https://day.js.org/docs/en/parse/string-format#list-of-all-available-parsing-tokens">Day.js</a>
for the full list of supported formats.</p>
</li>
<li>
<p><code>findAbove(column: string, {regexp?: string}): string</code> - Finds the
first cell above the current row in the given column. If <code>regexp</code> is
provided, the search will continue till a match is found</p>
</li>
</ol>
<pre><code class="language-handlebars">{{findAbove B regexp=&quot;LIMITED&quot;}}
</code></pre>
<ol start="10">
<li>
<p><code>acronym(str: string): string</code> - Returns the acronym of the given
string that is suitable to be used as a commodity symbol. For
example, <code>UTI Nifty Next 50 Index Growth Direct Plan</code> will be
converted to <code>UNNI</code></p>
</li>
<li>
<p><code>negate(value: string): number</code> - Negates the given value. For
example, <code>negate(&quot;123.45&quot;)</code> will return <code>-123.45</code></p>
</li>
<li>
<p><code>replace(str: string, search: string, replace: string): string</code> -
Replaces all the occurrences of <code>search</code> with <code>replace</code> in the
given string.</p>
</li>
<li>
<p><code>trim(str: string): string</code> - Trims the given string.</p>
</li>
<li>
<p><code>amount(str: string, {default?: string}): string</code> - Converts the given
string to a valid amount. If the string is blank, the default value is
used. Examples <code>(0.9534)</code> to <code>-0.9534</code>, <code>₹ 1,234.56</code> to <code>1234.56</code></p>
</li>
<li>
<p><code>regexpTest(str: string, regexp: string): boolean</code> - Tests the
given string against the given regular expression.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bulk-edit"><a class="header" href="#bulk-edit">Bulk Edit</a></h1>
<p>Paisa provides bulk transaction editor to search and modify multiple
transactions at once. The interface is made of two parts:</p>
<ol>
<li>
<p>Search input box allows you to narrow down the transactions you are
interested in making changes</p>
</li>
<li>
<p>Bulk Edit form allows you to make changes to the narrowed down set
of transactions.</p>
</li>
</ol>
<h2 id="search"><a class="header" href="#search">Search</a></h2>
<h4 id="plain"><a class="header" href="#plain">Plain</a></h4>
<p>Paisa provides a powerful search query interface. Let's start with a
few example queries.</p>
<pre><code>Expenses:Utilities:Electricity
</code></pre>
<p>This will search for all transactions that have a posting with account
named Expenses:Utilities:Electricity. By default, the search is case
insensitive and will do a substring match. So, <code>Expenses:Utilities</code>
will match Expenses:Utilities:Electricity account as well as. If you
want to search an account name which has special characters like space
in it, you can use double quotes to enclose it like
<code>&quot;Expenses:Utilities:Hair Cut&quot;</code>.</p>
<p>You can also search on transaction date. For example, if you want to
show all the transactions made on 1st Jan 2023, just type
<code>[2023-01-01]</code>. If you want to see all made on that month, just leave
out the day part <code>[2023-01]</code>. You can do the same with year, <code>[2023]</code>
will show all the transactions made in 2023.</p>
<p>There is experimental support for natural language date. You can do
queries like <code>[last month]</code>, <code>[last year]</code>, <code>[this month]</code>, <code>[last week]</code>, <code>[jan 2023]</code>, etc.</p>
<p>Let's say you want to search by amount. You can do that by typing
<code>42</code>, it will show all the transactions that have a posting with that
amount.</p>
<p>if you want to search a exact Account, you can do that using Regular
Expression. Just type <code>/^Assets:Equity:APPLE$/</code>, you can also do case
insensitive search by using the modifier <code>i</code> like
<code>/^Assets:Equity:APPLE$/i</code>.</p>
<h4 id="property"><a class="header" href="#property">Property</a></h4>
<p>You can also search based on properties like account, commodity,
amount, total, filename, payee and date.</p>
<pre><code>account = Expenses:Utilities:Electricity
payee =~ /uber/i
payee = &quot;Advance Tax&quot;
total &gt; 5000
commodity = GOLD
date &gt;= [2023-01-01]
filename = creditcard/2023/jan.ledger
</code></pre>
<p>The general format is <code>property operator value</code>. The property can be
any of the following:</p>
<ul>
<li>account (posting account)</li>
<li>commodity (posting commodity)</li>
<li>amount (posting amount)</li>
<li>total (transaction total)</li>
<li>filename (name of the file the transaction is in)</li>
<li>payee (transaction payee)</li>
<li>date (transaction date)</li>
</ul>
<p>The operator can be any of the following:</p>
<ul>
<li>= (equal)</li>
<li>=~ (regular expression match)</li>
<li>&lt; (less than)</li>
<li>&lt;= (less than or equal)</li>
<li>&gt; (greater than)</li>
<li>&gt;= (greater than or equal)</li>
</ul>
<p>Not all the combinations of property, operator and value would work,
if in doubt, just try it out, the UI will show you an error if the
query is not valid.</p>
<p>In fact, in the previous format we saw, the property and operator is
not specified and a default set is chosen based on the value type. For
example, <code>42</code> will be treated as <code>amount = 42</code>, <code>Expenses:Utilities</code>
will be treated as <code>account = Expenses:Utilities</code>,
<code>/Expenses:Utilities/i</code> will be treated as <code>account =~ /Expenses:Utilities/i</code>, <code>[2023-01]</code> will be treated as <code>date = [2023-01]</code>.</p>
<h4 id="conditional"><a class="header" href="#conditional">Conditional</a></h4>
<p>You can combine multiple property based queries using <code>AND</code> and <code>OR</code>,
you can negate them using <code>NOT</code></p>
<pre><code>account = Expenses:Utilities AND payee =~ /uber/i
commodity = GOLD OR total &gt; 5000
date &gt;= [2023-01-01] AND date &lt; [2023-04-01]
account = Expenses:Utilities AND payee =~ /uber/i AND (total &gt; 5000 OR total &lt; 1000)
total &lt; 5000 AND NOT account = Expenses:Utilities
[last year] AND (payee =~ /swiggy/i OR payee =~ /phonepe/i)
</code></pre>
<p>If you leave out the conditional operator, it will be treated as
<code>AND</code>. Both of the below queries are the same</p>
<pre><code>account = Expenses:Utilities AND payee =~ /uber/i
account = Expenses:Utilities payee =~ /uber/i
</code></pre>
<h2 id="bulk-edit-form"><a class="header" href="#bulk-edit-form">Bulk Edit Form</a></h2>
<p>Currently bulk edit form supports only account rename feature. More
will be added later. The preview button allows you to see the changes
before you save them. It will show a side by side diff of the changes.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="recurring"><a class="header" href="#recurring">Recurring</a></h1>
<p>Some of the transactions recur on a regular interval and it might be
useful to know the next due date for such transactions. Recurring page
shows the upcoming or recently missed transactions.</p>
<p>Paisa depends on the posting metadata to identify which transactions
are recurring. This metadata can be added in couple of ways. Let's say
you pay rent every month and you want to mark it as recurring, a
typical journal would like below</p>
<pre><code class="language-go">2023/07/01 Rent
    Expenses:Rent                             15,000 INR
    Assets:Checking

2023/08/01 Rent
    Expenses:Rent                             15,000 INR
    Assets:Checking
</code></pre>
<p>You can manually tag a posting by adding <code>; Recurring: Rent</code>.</p>
<pre><code class="language-go">2023/07/01 Rent
    ; Recurring: Rent
    Expenses:Rent                             15,000 INR
    Assets:Checking

2023/08/01 Rent
    ; Recurring: Rent
    Expenses:Rent                             15,000 INR
    Assets:Checking
</code></pre>
<p>The first part of the metadata before the colon is called tag name. It
should be <code>Recurring</code>. The second part is the tag value. This value is
used to group transactions.</p>
<p>Tagging each and every posting can be tiresome. Ledger has a feature
called <a href="https://ledger-cli.org/doc/ledger3.html#Automated-Transactions">Automated Transaction</a> which can make this process simpler.</p>
<pre><code class="language-go">= Expenses:Rent
    ; Recurring: Rent
</code></pre>
<p>The first line is the predicate and the line below it will get added
to any matching posting. By default, it will match the posting account
name. But you can target other attributes like payee, amount etc. You
can find more examples below, more info about predicate is available on
Ledger <a href="https://ledger-cli.org/doc/ledger3.html#Complex-expressions">docs</a></p>
<pre><code class="language-go">= expr payee=~/^PPF$/
    ; Recurring: PPF

= expr payee=~/Mutual Fund/
    ; Recurring: Mutual Fund

= expr 'account=~/Expenses:Insurance/ and (payee=~/HDFC/)'
    ; Recurring: Life Insurance

= expr 'account=~/Expenses:Insurance/ and !(payee=~/HDFC/)'
    ; Recurring: Bike Insurance

= expr payee=~/Savings Interest/
    ; Recurring: Savings Interest
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="budget"><a class="header" href="#budget">Budget</a></h1>
<p>Paisa supports a simple budgeting system. Let's say you get 50000 INR
at the beginning of the month. You want to budget this amount and
figure out how much you can spend on each category.</p>
<p>Let's add a salary transaction to the ledger:</p>
<pre><code class="language-go">2023/08/01 Salary
    Income:Salary:Acme                         -50,000 INR
    Assets:Checking
</code></pre>
<p>Now you have 50k in your checking account. Let's budget this amount:</p>
<pre><code class="language-go">~ Monthly in 2023/08/01
    Expenses:Rent                              15,000 INR
    Expenses:Food                              10,000 INR
    Expenses:Clothing                           5,000 INR
    Expenses:Entertainment                      5,000 INR
    Expenses:Transport                          5,000 INR
    Expenses:Personal                           5,000 INR
    Assets:Checking
</code></pre>
<p>The <code>~</code> character indicates that this is a periodic transaction. This
is not a real transaction, but used only for forecasting purposes. You
can read more about <a href="https://ledger-cli.org/doc/ledger3.html#Period-Expressions">periodic expressions</a> and <a href="https://ledger-cli.org/doc/ledger3.html#Budgeting-and-Forecasting">periodic transactions</a>.</p>
<blockquote>
<p>Even though the interval part is optional as per the doc, there is a
<a href="https://github.com/ledger/ledger/issues/1625">bug</a> in the ledger-cli, so you can't use <code>~ in 2023/08/01</code>,
instead you always have to specify some interval like <code>~ Monthly in 2023/08/01</code>.</p>
</blockquote>
<p><img src="images/budget-1.png" alt="Initial Budget" /></p>
<p>Now you can see that you will have 5k left in your checking account at
the end of the month, if you spend as per your budget. Before you
spend, you can check your budget and verify if you have money
available under that category.</p>
<p>Let's add some real transactions.</p>
<pre><code class="language-go">2023/08/02 Rent
    Expenses:Rent                             15,000 INR
    Assets:Checking

2023/08/03 Transport
    Expenses:Transport                         1,000 INR
    Assets:Checking

2023/08/03 Food
    Expenses:Food                              8,500 INR
    Assets:Checking

2023/08/05 Transport
    Expenses:Transport                         2,000 INR
    Assets:Checking

2023/08/07 Transport
    Expenses:Transport                         3,000 INR
    Assets:Checking

2023/08/10 Personal
    Expenses:Personal                          4,000 INR
    Assets:Checking

2023/08/15 Insurance
    Expenses:Insurance                         10000 INR
    Assets:Checking
</code></pre>
<p><img src="images/budget-2.png" alt="Month end Budget" /></p>
<p>As the month progresses, you can see how much you have spent and how
much you have left. You notice that you have overspent on transport
and you have missed the insurance payment. You have a budget deficit
now. That means, you can't actually spend as per your budget. You have
to first bring the deficit back to 0. Let's cut down the entertainment
and clothing budget to 0 and add insurance.</p>
<pre><code class="language-go">~ Monthly in 2023/08/01
    Expenses:Rent                             15,000 INR
    Expenses:Food                             10,000 INR
    Expenses:Clothing                              0 INR
    Expenses:Entertainment                         0 INR
    Expenses:Transport                         5,000 INR
    Expenses:Personal                          5,000 INR
    Assets:Checking
</code></pre>
<p><img src="images/budget-3.png" alt="Budget Deficit Fixed" /></p>
<p>You can go back and adjust your budget anytime. Let's move on to the
next month, assuming you haven't made any further transaction.</p>
<pre><code class="language-go">2023/09/01 Salary
    Income:Salary:Acme                       -50,000 INR
    Assets:Checking

~ Monthly in 2023/09/01
    Expenses:Rent                             15,000 INR
    Expenses:Food                             10,000 INR
    Expenses:Clothing                          5,000 INR
    Expenses:Entertainment                     5,000 INR
    Expenses:Transport                         5,000 INR
    Expenses:Personal                          5,000 INR
    Assets:Checking
</code></pre>
<p><img src="images/budget-4.png" alt="Next month Budget" /></p>
<p>You can see a new element in the UI called Rollover. This is basically
the amount you have budgeted last month, but haven't spent. This will
automatically rollover to the next month. That's pretty much it.</p>
<p>To recap, there are just two things you need to do.</p>
<ol>
<li>
<p>Create a periodic transaction at the beginning of the month when
you get your salary.</p>
</li>
<li>
<p>Adjust your budget as you spend and make sure there is no deficit.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ledger-cli"><a class="header" href="#ledger-cli">Ledger CLI</a></h1>
<p>Paisa is compatible with <a href="https://www.ledger-cli.org">ledger</a> and <a href="https://hledger.org/">hledger</a>. By default
paisa will try to use <strong>ledger</strong>, if you prefer to use <strong>hledger</strong>
instead, change the <code>ledger_cli</code> value in paisa.yaml</p>
<pre><code class="language-yaml">ledger_cli: hledger
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="config-1"><a class="header" href="#config-1">Config</a></h1>
<p><strong>paisa</strong> checks for a config file named <code>paisa.yaml</code> in the current
directory. It can also be set via flag <code>--config</code> or env variable
<code>PAISA_CONFIG</code>.</p>
<pre><code class="language-yaml"># Path to your journal file. It can be absolute or relative to the
# config file. The main journal file can refer other files using
# `include` as long as all the files are in the same or sub directory
# REQUIRED
journal_path: /home/john/finance/personal.ledger

# Path to your database file. It can be absolute or relative to the
# config file. The database file will be created if it does not exist.
# REQUIRED
db_path: /home/john/finance/paisa.db

# The ledger client to use
# OPTIONAL, DEFAULT: ledger, ENUM: ledger, hledger
ledger_cli: hledger

# The default currency to use. NOTE: Paisa tries to convert other
# currencies to default currency, so make sure it's possible to
# convert to default currency by specifying the exchange rate.
#
# OPTIONAL, DEFAULT: INR
default_currency: INR

# The locale used to format numbers. The list of locales supported
# depends on your browser. It's known to work well with en-US and en-IN.
#
# OPTIONAL, DEFAULT: en-IN
locale: en-IN

# First month of the financial year. This can be set to 1 to follow
# January to December.
#
# OPTIONAL, DEFAULT: 4
financial_year_starting_month: 4

## Retirement
retirement:
  # Safe Withdrawal Rate
  # OPTIONAL, DEFAULT: 4
  swr: 2
  # List of expense accounts
  # OPTIONAL, DEFAULT: Expenses:*
  expenses:
    - Expenses:Clothing
    - Expenses:Education
    - Expenses:Entertainment
    - Expenses:Food
    - Expenses:Gift
    - Expenses:Insurance
    - Expenses:Misc
    - Expenses:Restaurant
    - Expenses:Shopping
    - Expenses:Utilities
  # List of accounts where you keep retirement savings
  # OPTIONAL, DEFAULT: Assets:*
  savings:
    - Assets:Equity:*
    - Assets:Debt:*
  # By default average of last 3 year expenses will be used to
  # calculate your yearly expenses. This can be overriden by setting
  # this config to positive value
  # OPTIONAL, DEFAULT: 0
  yearly_expenses: 0

## Schedule AL
# OPTIONAL, DEFAULT: []
schedule_al:
  # Code
  # REQUIRED, ENUM: immovable, metal, art, vehicle, bank, share,
  # insurance, loan, cash, liability
  - code: metal
    accounts:
      - Assets:Gold
  - code: bank
    accounts:
      - Assets:Checking
      - Assets:Debt:Cash:FD
  - code: share
    accounts:
      - Assets:Equity:*
  - code: insurance
    accounts:
      - Assets:Debt:Insurance

## Allocation Target
# OPTIONAL, DEFAULT: []
allocation_targets:
  - name: Debt
    target: 30
    accounts:
      - Assets:Debt:*
      - Assets:Checking
  - name: Equity
    target: 60
    accounts:
      - Assets:Equity:*
  - name: Equity Foreign
    target: 20
    accounts:
      - Assets:Equity:NASDAQ
  - name: Equity Index
    target: 20
    accounts:
      - Assets:Equity:NIFTY
  - name: Equity Active
    target: 20
    accounts:
      - Assets:Equity:PPFAS
  - name: Others
    target: 10
    accounts:
      - Assets:Gold
      - Assets:RealEstate

## Commodities
# OPTIONAL, DEFAULT: []
commodities:
  - name: NASDAQ
    # Required, ENUM: mutualfund, stock, nps, unknown
    type: mutualfund
    # differs based on type
    code: 145552
    harvest: 1095
    # Optional, ENUM: equity65, equity35, debt, unlisted_equity
    tax_category: debt
  - name: NIFTY
    type: mutualfund
    code: 120716
    harvest: 365
    tax_category: equity65
  - name: APPLE
    type: stock
    code: AAPL
    harvest: 1095
    tax_category: equity65
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
